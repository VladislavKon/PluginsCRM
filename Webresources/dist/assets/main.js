var wr;!function(){"use strict";var u,t={463:function(e,n,t){function r(e){try{var n=e.getFormContext();null!=n.getControl("new_region")&&null!=n.getControl("new_region")&&n.getControl("new_city").addPreSearch(function(){!function(e){try{var n,t=e.getAttribute("new_region").getValue();null!=t&&(n="<filter type='and'><condition attribute='new_regionlookup' operator='eq' value='"+t[0].id+"' /></filter>",e.getControl("new_city").addCustomFilter(n))}catch(e){throw new Error(e.Message)}}(n)})}catch(e){throw new Error(e.Message)}}t.r(n),t.d(n,{filter:function(){return o},iframe:function(){return i}});var o,i,a=t(526),l=t(961);function u(e,n,t,r,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void t(e)}c.done?n(l):Promise.resolve(l).then(r,o)}function d(){try{var e=window.parent,t=document.getElementById("myTable"),n=e.Xrm.Page.data.entity.getId(),r="&$filter=_objectid_value eq '"+n+"'";e.Xrm.WebApi.retrieveMultipleRecords("annotation","?$select=_objectid_value, notetext, subject, annotationid, createdon"+r).then(function(){var c,n=(c=regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n||t.childNodes.length==n.entities.length){e.next=7;break}if(0<t.childNodes.length)for(;t.hasChildNodes();)t.removeChild(t.childNodes[0]);return e.next=4,void n.entities.sort(function(e,n){return e.createdon>n.createdon?1:e.createdon<n.createdon?-1:0}).forEach(function(n){var e=a.createElement("tr",{className:"cell"},a.createElement("td",{className:"cell"},n.subject),a.createElement("td",{className:"cell2"},n.notetext),a.createElement("button",{className:"button",onClick:function(){var e;e=n.annotationid,window.parent.Xrm.WebApi.deleteRecord("annotation",e).then(function(){location.reload()})}},"Закрыть"));l.render(e,document.getElementById("myTable"))});case 4:setTimeout(d,4e3),e.next=8;break;case 7:setTimeout(d,4e3);case 8:case"end":return e.stop()}},e)}),function(){var e=this,a=arguments;return new Promise(function(n,t){var r=c.apply(e,a);function o(e){u(r,n,t,o,i,"next",e)}function i(e){u(r,n,t,o,i,"throw",e)}o(void 0)})});return function(e){return n.apply(this,arguments)}}())}catch(e){throw new Error(e.Message)}}t(619),(o||(o={})).filterCity=r,(i||(i={})).getAnnotations=d},638:function(e,n,t){var r=t(352),r=t.n(r)()(function(e){return e[1]});r.push([e.id,"html {\r\n    background: linear-gradient(to bottom right, #FFA49D, #C6FFFC) no-repeat center center fixed;\r\n    -webkit-background-size: cover;\r\n    -moz-background-size: cover;\r\n    -o-background-size: cover;    \r\n    background-size: cover;\r\n    font-family: cursive;\r\n    font-style: initial;\r\n    align-content: center;\r\n    text-align: center;\r\n}\r\n.table {    \r\n    border:solid;\r\n    border-style: inset;\r\n    padding: 4px;\r\n    border-radius: 10px;\r\n    width: 100%;\r\n}\r\n.cell {\r\n    border-style: inset;\r\n    padding: 2px;\r\n    border-radius: 5px;\r\n    text-align: center;\r\n    font-size: small;\r\n    width: 25%;    \r\n}\r\n.cell2{\r\n    border-style: inset;\r\n    padding: 2px;\r\n    border-radius: 5px;\r\n    text-align: center;\r\n    font-size: small;\r\n    width: 70%;\r\n}\r\n.button {\r\n    border-style: inset;\r\n    padding: 2px;\r\n    border-radius: 5px;\r\n    text-align: center;\r\n    font-size: small;    \r\n}\r\n\r\n    \r\n",""]),n.Z=r},619:function(e,n,t){t.r(n);var r=t(701),o=t.n(r),i=t(236),a=t.n(i),c=t(80),l=t.n(c),u=t(850),r=t.n(u),i=t(182),c=t.n(i),u=t(213),i=t.n(u),u=t(638),t={};t.styleTagTransform=i(),t.setAttributes=r(),t.insert=l().bind(null,"head"),t.domAPI=a(),t.insertStyleElement=c();o()(u.Z,t);n.default=u.Z&&u.Z.locals?u.Z.locals:void 0}},r={};function d(e){var n=r[e];if(void 0!==n)return n.exports;n=r[e]={id:e,exports:{}};return t[e](n,n.exports,d),n.exports}d.m=t,u=[],d.O=function(e,n,t,r){if(!n){for(var o=1/0,i=0;i<u.length;i++){for(var a,n=u[i][0],t=u[i][1],r=u[i][2],c=!0,l=0;l<n.length;l++)(!1&r||r<=o)&&Object.keys(d.O).every(function(e){return d.O[e](n[l])})?n.splice(l--,1):(c=!1,r<o&&(o=r));c&&(u.splice(i--,1),void 0!==(a=t())&&(e=a))}return e}r=r||0;for(var i=u.length;0<i&&u[i-1][2]>r;i--)u[i]=u[i-1];u[i]=[n,t,r]},d.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(n,{a:n}),n},d.d=function(e,n){for(var t in n)d.o(n,t)&&!d.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},d.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},d.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var u={179:0};d.O.j=function(e){return 0===u[e]};function e(e,n){var t,r,o,i=n[0],a=n[1],c=n[2],l=0;if(i.some(function(e){return 0!==u[e]})){for(t in a)d.o(a,t)&&(d.m[t]=a[t]);c&&(o=c(d))}for(e&&e(n);l<i.length;l++)r=i[l],d.o(u,r)&&u[r]&&u[r][0](),u[i[l]]=0;return d.O(o)}var n=self.webpackChunkwr=self.webpackChunkwr||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var e=d.O(void 0,[216],function(){return d(463)}),e=d.O(e);wr=e}();